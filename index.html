<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AI æ—¶ä»£çš„ä¸­å°å­¦æ•™è‚²ï¼šå…¨æ™¯æ²™ç›˜ä¸æ¨¡æ‹Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Zilla+Slab:wght@500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f4f8;
            color: #1a202c;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        /* --- Loading Screen --- */
        #app-loader {
            position: fixed;
            inset: 0;
            background-color: #ffffff;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out, visibility 0.5s;
        }
        .loader-ring {
            display: inline-block;
            width: 50px;
            height: 50px;
        }
        .loader-ring:after {
            content: " ";
            display: block;
            width: 44px;
            height: 44px;
            margin: 3px;
            border-radius: 50%;
            border: 4px solid #319795;
            border-color: #319795 transparent #319795 transparent;
            animation: ring 1.2s linear infinite;
        }
        @keyframes ring { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- Animations --- */
        .animate-slide-up { animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(20px); }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* --- Navigation --- */
        .nav-item { white-space: nowrap; transition: all 0.3s; }
        .nav-item.active {
            background-color: #319795;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(49, 151, 149, 0.4);
        }

        /* --- Game Styling --- */
        .game-card {
            transition: transform 0.2s, border-color 0.2s, background-color 0.2s;
            cursor: pointer;
        }
        .game-card:active { transform: scale(0.98); }
        @media(min-width: 768px) {
            .game-card:hover {
                transform: translateY(-2px);
                border-color: #319795;
                background-color: #f0fdFa;
            }
        }

        /* --- Typography --- */
        .prose-h3 { font-family: 'Zilla Slab', serif; color: #2d3748; font-weight: 700; font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose-p { margin-bottom: 1rem; line-height: 1.75; color: #4a5568; font-size: 0.95rem; }
        
        .insight-box {
            border-left: 4px solid;
            padding: 1rem;
            margin: 1.5rem 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-radius: 0 8px 8px 0;
        }
        .insight-box.blue { border-color: #4299e1; background-color: #ebf8ff; }
        .insight-box.purple { border-color: #9f7aea; background-color: #faf5ff; }
        .insight-box.orange { border-color: #ed8936; background-color: #fffaf0; }

        /* --- Chart Wrapper --- */
        .chart-wrapper { position: relative; width: 100%; height: 300px; }
        @media (max-width: 640px) { .chart-wrapper { height: 260px; } }

        /* --- Modal Positioning Fix --- */
        /* Fixed overlay */
        #modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1000;
            backdrop-filter: blur(4px); transition: opacity 0.3s;
        }
        
        /* Modal Container - Critical Fixes for centering */
        #modal-container {
            position: fixed; z-index: 1001;
            background: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            display: flex; flex-direction: column;
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s;
        }

        /* Mobile State: Bottom Sheet */
        @media (max-width: 639px) {
            #modal-container {
                bottom: 0; left: 0; right: 0;
                width: 100%;
                max-height: 85vh;
                border-top-left-radius: 1.5rem;
                border-top-right-radius: 1.5rem;
                transform: translateY(100%); /* Start off-screen */
            }
            #modal-container.open { transform: translateY(0); }
        }

        /* Desktop State: Centered Modal */
        @media (min-width: 640px) {
            #modal-container {
                top: 50%; left: 50%;
                width: 100%; max-width: 600px;
                max-height: 80vh;
                border-radius: 1rem;
                transform: translate(-50%, -50%) scale(0.95); /* Start slightly smaller */
                opacity: 0;
                pointer-events: none;
            }
            #modal-container.open {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                pointer-events: auto;
            }
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Loading -->
    <div id="app-loader">
        <div class="loader-ring mb-4"></div>
        <div class="text-teal-800 font-bold text-lg">æ­£åœ¨åˆå§‹åŒ–æ•™è‚²æ²™ç›˜...</div>
        <div class="text-gray-500 text-sm mt-2">åŠ è½½äº¤äº’æ¨¡å‹ä¸æ•°æ®</div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center cursor-pointer" onclick="location.reload()">
                <div class="w-9 h-9 bg-teal-600 rounded-lg flex items-center justify-center text-white mr-3 shadow-md">
                    <i class="fas fa-cube text-lg"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-gray-800 leading-tight">AI æ•™è‚²å…¨æ™¯</h1>
                    <p class="text-[10px] text-gray-500 uppercase tracking-wider">Insight & Simulation 2025</p>
                </div>
            </div>
        </div>
        <!-- Scrollable Nav -->
        <div class="bg-white border-b border-gray-100 overflow-x-auto no-scrollbar">
            <div class="flex px-4 pb-2 space-x-2 min-w-max">
                <button onclick="switchTab('overview')" id="tab-overview" class="nav-item active px-4 py-2 rounded-full text-sm font-medium text-gray-600">å…¨å±€æ´å¯Ÿ</button>
                <button onclick="switchTab('game')" id="tab-game" class="nav-item px-4 py-2 rounded-full text-sm font-medium text-gray-600"><i class="fas fa-gamepad mr-1"></i>è¯¾å ‚æŒ‡æŒ¥å®˜</button>
                <button onclick="switchTab('shifts')" id="tab-shifts" class="nav-item px-4 py-2 rounded-full text-sm font-medium text-gray-600">èŒƒå¼é‡æ„</button>
                <button onclick="switchTab('future')" id="tab-future" class="nav-item px-4 py-2 rounded-full text-sm font-medium text-gray-600">2030æœªæ¥ä¸€æ—¥</button>
                <button onclick="switchTab('literacy')" id="tab-literacy" class="nav-item px-4 py-2 rounded-full text-sm font-medium text-gray-600">ç´ å…»æ–°æ ‡</button>
                <button onclick="switchTab('labs')" id="tab-labs" class="nav-item px-4 py-2 rounded-full text-sm font-medium text-gray-600"><i class="fas fa-flask mr-1"></i>æ·±åº¦å®éªŒ</button>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 py-6 w-full relative">

        <!-- TAB: OVERVIEW -->
        <section id="view-overview" class="space-y-6 animate-slide-up">
            <div class="bg-gradient-to-br from-teal-600 to-teal-800 rounded-2xl shadow-lg p-6 text-white relative overflow-hidden">
                <div class="absolute top-0 right-0 p-6 opacity-10"><i class="fas fa-network-wired text-8xl"></i></div>
                <div class="relative z-10">
                    <div class="inline-flex items-center bg-white/20 px-3 py-1 rounded-full text-xs font-bold mb-3 backdrop-blur-sm">
                        <i class="fas fa-star mr-1"></i> æ ¸å¿ƒç»“è®º
                    </div>
                    <h2 class="text-2xl sm:text-3xl font-bold mb-3">ä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯â€œå¢å¼ºâ€</h2>
                    <p class="text-teal-100 text-sm sm:text-base leading-relaxed max-w-2xl">
                        ç»¼åˆäº”ä»½æƒå¨æŠ¥å‘Šï¼Œæ•™è‚²æ­£ç»å†ä»â€œå·¥å‚æ¨¡å¼â€å‘â€œæœ‰æœºç”Ÿæ€â€çš„è·ƒè¿ã€‚AI å°†ä½œä¸º<strong>â€œè®¤çŸ¥è„šæ‰‹æ¶â€</strong>ï¼Œé‡Šæ”¾æ•™å¸ˆçš„è¡Œæ”¿è´Ÿæ‹…ï¼Œä½¿å…¶å›å½’è‚²äººæœ¬è´¨â€”â€”å³ US Dept of Ed æ‰€å¼ºè°ƒçš„<strong>â€œäººåœ¨å›è·¯ (Human-in-the-loop)â€</strong>ã€‚
                    </p>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Card 1 -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer group" onclick="openModal('efficiency')">
                    <div class="flex justify-between items-start">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600 group-hover:scale-110 transition-transform"><i class="fas fa-stopwatch"></i></div>
                        <span class="text-xs font-bold text-gray-400">æ•ˆç‡é©å‘½</span>
                    </div>
                    <div class="mt-3">
                        <h3 class="text-2xl font-bold text-gray-800">30%</h3>
                        <p class="text-xs text-gray-500 mt-1">æ•™å¸ˆè¡Œæ”¿æ—¶é—´é‡Šæ”¾</p>
                    </div>
                    <div class="mt-3 text-xs text-green-600 font-bold group-hover:underline">æ·±åº¦è§£æï¼šæ°æ–‡æ–¯æ‚–è®º ></div>
                </div>
                <!-- Card 2 -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer group" onclick="openModal('role')">
                    <div class="flex justify-between items-start">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform"><i class="fas fa-users-cog"></i></div>
                        <span class="text-xs font-bold text-gray-400">è§’è‰²é‡æ„</span>
                    </div>
                    <div class="mt-3">
                        <h3 class="text-xl font-bold text-gray-800">å­¦ä¹ ç¼–æ’è€…</h3>
                        <p class="text-xs text-gray-500 mt-1">ä»è®²å¸ˆåˆ°è®¾è®¡å¸ˆ (Orchestrator)</p>
                    </div>
                    <div class="mt-3 text-xs text-blue-600 font-bold group-hover:underline">æŸ¥çœ‹å®šä¹‰ ></div>
                </div>
                <!-- Card 3 -->
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer group" onclick="openModal('divide')">
                    <div class="flex justify-between items-start">
                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center text-red-600 group-hover:scale-110 transition-transform"><i class="fas fa-exclamation-triangle"></i></div>
                        <span class="text-xs font-bold text-gray-400">æœ€å¤§é£é™©</span>
                    </div>
                    <div class="mt-3">
                        <h3 class="text-xl font-bold text-gray-800">é©¬å¤ªæ•ˆåº”</h3>
                        <p class="text-xs text-gray-500 mt-1">èƒ½åŠ›é¸¿æ²Ÿ (Capability Divide)</p>
                    </div>
                    <div class="mt-3 text-xs text-red-600 font-bold group-hover:underline">æŸ¥çœ‹è­¦ç¤º ></div>
                </div>
            </div>

            <!-- Sentiment Chart -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-gray-800">æ„ŸçŸ¥é”™ä½ï¼šå­¦ç”Ÿ vs æ•™å¸ˆ</h3>
                    <button class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-500 hover:text-teal-600" onclick="openModal('sentiment')"><i class="fas fa-info-circle mr-1"></i>è§£è¯»æ•°æ®</button>
                </div>
                <div class="chart-wrapper">
                    <canvas id="chartSentiment"></canvas>
                </div>
            </div>
        </section>

        <!-- TAB: GAME (The Orchestrator) -->
        <section id="view-game" class="hidden space-y-6 animate-slide-up">
            <div class="text-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">è¯¾å ‚æŒ‡æŒ¥å®˜ (The Orchestrator)</h2>
                <p class="text-sm text-gray-500">æ¨¡æ‹Ÿ AI æ—¶ä»£æ•™å¸ˆçš„å†³ç­–æŒ‘æˆ˜ã€‚åŸºäº US Dept of Ed ä¼¦ç†æ¡†æ¶ã€‚</p>
            </div>

            <div class="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden max-w-2xl mx-auto relative">
                <!-- Progress Bar -->
                <div class="h-1 w-full bg-gray-200">
                    <div class="h-full bg-teal-500 transition-all duration-300" id="game-progress" style="width: 33%"></div>
                </div>

                <!-- Game Header -->
                <div class="bg-gray-800 p-4 text-white flex justify-between items-center">
                    <div class="text-sm font-bold"><i class="fas fa-user-tie mr-2"></i>å†³ç­–è€…ï¼šæ•°å­¦æ•™å¸ˆ</div>
                    <div class="bg-gray-700 px-2 py-1 rounded text-xs" id="scene-counter">åœºæ™¯ 1/3</div>
                </div>

                <!-- Game Body -->
                <div class="p-6" id="game-scene-area">
                    <!-- Dynamic Content -->
                </div>

                <!-- Feedback Area (Overlay) -->
                <div id="game-feedback" class="absolute inset-0 bg-white/95 z-20 hidden flex-col justify-center items-center p-8 text-center animate-slide-up">
                    <div id="feedback-icon" class="text-5xl mb-4"></div>
                    <h4 class="font-bold text-xl mb-2" id="feedback-title"></h4>
                    <p class="text-sm text-gray-600 mb-6 leading-relaxed" id="feedback-text"></p>
                    <button onclick="nextScene()" class="bg-teal-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-teal-700 transition-colors shadow-lg">
                        ä¸‹ä¸€åœºæ™¯ <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
                
                <!-- Game Over Screen -->
                <div id="game-over" class="absolute inset-0 bg-teal-900 text-white z-30 hidden flex-col justify-center items-center p-8 text-center">
                    <i class="fas fa-graduation-cap text-6xl mb-4 text-teal-300"></i>
                    <h3 class="text-2xl font-bold mb-2">æ¨¡æ‹Ÿå®Œæˆ</h3>
                    <p class="text-teal-100 text-sm mb-6">ä½ å·²ä½“éªŒäº† AI æ—¶ä»£æ•™å¸ˆçš„æ ¸å¿ƒæŒ‘æˆ˜ï¼šåœ¨æ•ˆç‡ä¸ä¼¦ç†ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚</p>
                    <button onclick="restartGame()" class="bg-white text-teal-900 px-6 py-3 rounded-lg font-bold hover:bg-teal-50">é‡æ–°å¼€å§‹</button>
                </div>
            </div>
        </section>

        <!-- TAB: SHIFTS -->
        <section id="view-shifts" class="hidden space-y-6 animate-slide-up">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Bloom åˆ†ç±»æ³•çš„å€’ç½®</h2>
                <p class="text-sm text-gray-500 px-4">AI æ¥ç®¡åº•å±‚èƒ½åŠ›ï¼Œäººç±»å¿…é¡»è·ƒå‡è‡³é¡¶å±‚ã€‚</p>
            </div>

            <!-- Bloom's Inversion Visual -->
            <div class="relative max-w-md mx-auto mb-8 p-4">
                <div class="flex flex-col space-y-1">
                    <div class="h-12 bg-indigo-600 text-white flex items-center justify-center rounded-t-lg font-bold shadow-lg transform scale-110 z-10 cursor-pointer" onclick="openModal('shift_create')">åˆ›é€  (Create) <span class="ml-2 text-xs opacity-70">äººç±»æ ¸å¿ƒ</span></div>
                    <div class="h-10 bg-indigo-500 text-white flex items-center justify-center font-medium shadow opacity-90">è¯„ä»· (Evaluate)</div>
                    <div class="h-8 bg-indigo-400 text-white flex items-center justify-center text-sm opacity-80">åˆ†æ (Analyze)</div>
                    <div class="h-6 bg-gray-300 text-gray-600 flex items-center justify-center text-xs">åº”ç”¨ (Apply)</div>
                    <div class="h-6 bg-gray-200 text-gray-500 flex items-center justify-center text-xs">ç†è§£ (Understand)</div>
                    <div class="h-6 bg-gray-100 text-gray-400 flex items-center justify-center text-xs rounded-b-lg">è®°å¿† (Remember) <span class="ml-2 text-[10px] opacity-70">AI å¤–åŒ…</span></div>
                </div>
                <div class="absolute top-1/2 -right-4 transform -translate-y-1/2 text-gray-400">
                    <i class="fas fa-arrow-up text-2xl animate-bounce"></i>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-white p-5 rounded-xl shadow-sm border-l-4 border-indigo-500 clickable-card" onclick="openModal('shift_assess')">
                    <h3 class="font-bold text-gray-800 mb-2">è¯„ä¼°æ–¹å¼ï¼šéšå½¢åŒ–</h3>
                    <p class="text-sm text-gray-600">ä»â€œå‘¨äº”çš„è€ƒè¯•â€å˜ä¸ºâ€œå…¨å¤©å€™æ•°æ®æµâ€ã€‚Stealth Assessment èƒ½å¤Ÿåœ¨ä¸æ‰“æ–­å­¦ä¹ çš„æƒ…å†µä¸‹æµ‹é‡èƒ½åŠ›ã€‚</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-sm border-l-4 border-pink-500 clickable-card" onclick="openModal('shift_resource')">
                    <h3 class="font-bold text-gray-800 mb-2">å­¦ä¹ èµ„æºï¼šç”Ÿæˆå¼</h3>
                    <p class="text-sm text-gray-600">ä»â€œé™æ€æ•™æâ€å˜ä¸ºâ€œåŠ¨æ€ç”Ÿæˆâ€ã€‚AI èƒ½å°†æœ€æ–°çš„ç«ç®­å‘å°„æ–°é—»ç¬é—´è½¬åŒ–ä¸ºç‰©ç†ä¹ é¢˜ã€‚</p>
                </div>
            </div>
        </section>

        <!-- TAB: FUTURE 2030 -->
        <section id="view-future" class="hidden space-y-6 animate-slide-up">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center"><i class="far fa-calendar-alt mr-3 text-teal-600"></i>2030å¹´çš„ä¸€å¤©</h2>
                
                <div class="relative border-l-2 border-teal-200 ml-3 space-y-8">
                    <!-- Event 1 -->
                    <div class="ml-6 relative group cursor-pointer" onclick="openModal('future_morning')">
                        <span class="absolute -left-[31px] top-0 bg-teal-600 w-4 h-4 rounded-full border-2 border-white shadow"></span>
                        <div class="text-xs font-bold text-teal-600 mb-1">08:00 AM - æ™¨é—´ç®€æŠ¥</div>
                        <h4 class="font-bold text-gray-800">AI åŠ©æ•™çš„â€œæ¯æ—¥æƒ…æŠ¥â€</h4>
                        <p class="text-sm text-gray-600 mt-1">Teacher Dashboard æ˜¾ç¤ºï¼šæ˜¨æ™š 5 åå­¦ç”Ÿåœ¨â€œäºŒæ¬¡å‡½æ•°â€ä½œä¸šä¸­å—æŒ«ã€‚ç³»ç»Ÿå»ºè®®ä»Šå¤©å¯ç”¨â€œå¯è§†åŒ–æ•™å­¦æ¨¡ç»„â€ã€‚</p>
                    </div>
                    <!-- Event 2 -->
                    <div class="ml-6 relative group cursor-pointer" onclick="openModal('future_class')">
                        <span class="absolute -left-[31px] top-0 bg-white w-4 h-4 rounded-full border-2 border-teal-400 shadow"></span>
                        <div class="text-xs font-bold text-gray-500 mb-1">10:30 AM - é¡¹ç›®å¼å­¦ä¹ </div>
                        <h4 class="font-bold text-gray-800">æ··åˆç°å®ä¸ AI åä½œ</h4>
                        <p class="text-sm text-gray-600 mt-1">å­¦ç”Ÿåˆ†ç»„è®¾è®¡ç«æ˜ŸåŸºåœ°ã€‚AI å®æ—¶è¯„ä¼°å„ç»„çš„åä½œæ¨¡å¼ï¼ˆè°åœ¨ä¸»å¯¼ï¼Œè°åœ¨æ­ä¾¿è½¦ï¼‰ï¼Œå¹¶æç¤ºæ•™å¸ˆä»‹å…¥å¹²é¢„ã€‚</p>
                    </div>
                    <!-- Event 3 -->
                    <div class="ml-6 relative group cursor-pointer" onclick="openModal('future_evening')">
                        <span class="absolute -left-[31px] top-0 bg-white w-4 h-4 rounded-full border-2 border-teal-400 shadow"></span>
                        <div class="text-xs font-bold text-gray-500 mb-1">04:00 PM - ä¸ªæ€§åŒ–ä½œä¸šç”Ÿæˆ</div>
                        <h4 class="font-bold text-gray-800">åƒäººåƒé¢çš„ç»ƒä¹ </h4>
                        <p class="text-sm text-gray-600 mt-1">æ²¡æœ‰ç»Ÿä¸€çš„ä½œä¸šå•ã€‚AI æ ¹æ®æ¯ä¸ªå­¦ç”Ÿå½“å¤©çš„è®¤çŸ¥è´Ÿè·å’Œå…´è¶£ï¼Œç”Ÿæˆäº† 30 ä»½å®Œå…¨ä¸åŒçš„æŒ‘æˆ˜ä»»åŠ¡ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- TAB: LITERACY -->
        <section id="view-literacy" class="hidden space-y-6 animate-slide-up">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-800 mb-4">ACM ç´ å…»æ¨¡å‹ (Radar)</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartLiteracy"></canvas>
                    </div>
                    <p class="text-xs text-center text-gray-400 mt-2">æ ¸å¿ƒè½¬ç§»ï¼šä»æŠ€æœ¯å®ç°è½¬å‘æ‰¹åˆ¤æ€§è¯„ä¼°</p>
                </div>
                
                <div class="space-y-4">
                    <h3 class="font-bold text-gray-800 px-1">è¯¾ç¨‹è¿›é˜¶è·¯çº¿å›¾</h3>
                    <!-- K-5 -->
                    <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-green-400 clickable-card" onclick="openModal('curr_k5')">
                        <div class="flex justify-between">
                            <span class="font-bold text-green-700 text-sm">K-5 (å°å­¦)</span>
                            <i class="fas fa-robot text-green-200"></i>
                        </div>
                        <div class="mt-2 text-sm font-bold text-gray-800">æ„ŸçŸ¥ä¸ä½“éªŒ</div>
                        <p class="text-xs text-gray-500 mt-1">æ ¸å¿ƒæ´»åŠ¨ï¼šTeachable Machineã€‚è®©å­©å­æ˜ç™½æœºå™¨æ˜¯â€œçœ‹å›¾å­¦ä¹ â€çš„ï¼Œä¹Ÿä¼šçŠ¯é”™ã€‚</p>
                    </div>
                    <!-- 6-8 -->
                    <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-blue-400 clickable-card" onclick="openModal('curr_68')">
                        <div class="flex justify-between">
                            <span class="font-bold text-blue-700 text-sm">6-8 (åˆä¸­)</span>
                            <i class="fas fa-network-wired text-blue-200"></i>
                        </div>
                        <div class="mt-2 text-sm font-bold text-gray-800">é€»è¾‘ä¸ä¼¦ç†</div>
                        <p class="text-xs text-gray-500 mt-1">æ ¸å¿ƒæ´»åŠ¨ï¼šåè§ä¾¦æ¢ã€‚åˆ†ææ¨èç®—æ³•å¦‚ä½•å½¢æˆä¿¡æ¯èŒ§æˆ¿ã€‚</p>
                    </div>
                    <!-- 9-12 -->
                    <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-purple-400 clickable-card" onclick="openModal('curr_912')">
                        <div class="flex justify-between">
                            <span class="font-bold text-purple-700 text-sm">9-12 (é«˜ä¸­)</span>
                            <i class="fas fa-code-branch text-purple-200"></i>
                        </div>
                        <div class="mt-2 text-sm font-bold text-gray-800">åˆ›é€ ä¸å¾®è°ƒ</div>
                        <p class="text-xs text-gray-500 mt-1">æ ¸å¿ƒæ´»åŠ¨ï¼šæ„å»º RAG æœºå™¨äººã€‚è§£å†³çœŸå®çš„æ ¡å›­æˆ–ç¤¾åŒºé—®é¢˜ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- TAB: LABS (Simulation) -->
        <section id="view-labs" class="hidden space-y-6 animate-slide-up">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-indigo-600 p-4 text-white">
                    <h3 class="font-bold flex items-center"><i class="fas fa-brain mr-2"></i> è®¤çŸ¥å¸è½½æ¨¡æ‹Ÿå™¨</h3>
                    <p class="text-indigo-200 text-xs mt-1">ç†è®ºä¾æ®ï¼šarXiv 2503 "Desirable Difficulties"ï¼ˆå¿…è¦å›°éš¾ï¼‰</p>
                </div>
                <div class="p-6">
                    <p class="text-sm text-gray-600 mb-6">è°ƒèŠ‚ AI ä»‹å…¥ç¨‹åº¦ï¼Œè§‚å¯Ÿå¯¹<strong>â€œå­¦ä¹ æ•ˆç‡â€</strong>ä¸<strong>â€œå¤§è„‘è®­ç»ƒâ€</strong>çš„å½±å“ã€‚</p>
                    
                    <div class="mb-8">
                        <input type="range" min="0" max="100" value="50" id="simSlider" oninput="updateSim(this.value)">
                        <div class="flex justify-between text-xs text-gray-400 mt-2 font-mono">
                            <span>0% (çº¯äººå·¥)</span>
                            <span>50% (äººæœºåä½œ)</span>
                            <span>100% (å…¨è‡ªåŠ¨)</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div id="box-eff" class="p-4 rounded-lg bg-gray-50 border border-gray-200 transition-all duration-300">
                            <div class="text-xs text-gray-500 uppercase">ä»»åŠ¡æ•ˆç‡</div>
                            <div class="text-2xl font-bold text-gray-700" id="score-eff">--</div>
                        </div>
                        <div id="box-cog" class="p-4 rounded-lg bg-gray-50 border border-gray-200 transition-all duration-300">
                            <div class="text-xs text-gray-500 uppercase">è®¤çŸ¥æ·±åº¦</div>
                            <div class="text-2xl font-bold text-gray-700" id="score-cog">--</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-indigo-50 text-indigo-800 text-sm rounded border-l-4 border-indigo-400" id="sim-feedback">
                        è°ƒæ•´æ»‘å—å¼€å§‹å®éªŒ...
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Modal System -->
    <div id="modal-overlay" class="hidden opacity-0" onclick="closeModal()"></div>
    <div id="modal-container" class="hidden">
        <!-- Mobile Handle -->
        <div class="sm:hidden w-full flex justify-center pt-3 pb-1" onclick="closeModal()">
            <div class="w-12 h-1.5 bg-gray-300 rounded-full"></div>
        </div>

        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white sm:rounded-t-2xl">
            <h3 class="text-xl font-bold text-gray-800 truncate pr-4" id="modal-title">æ ‡é¢˜</h3>
            <button onclick="closeModal()" class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 flex items-center justify-center transition-colors flex-shrink-0"><i class="fas fa-times"></i></button>
        </div>
        
        <!-- Body -->
        <div class="p-6 overflow-y-auto" id="modal-body" style="flex-grow: 1;">
            <!-- Content Injected Here -->
        </div>

        <!-- Footer -->
        <div class="px-6 py-4 border-t border-gray-100 bg-gray-50 sm:rounded-b-2xl flex flex-col sm:flex-row justify-between items-center text-xs text-gray-500 gap-3">
            <span id="modal-source" class="font-bold text-teal-700"></span>
            <button onclick="closeModal()" class="w-full sm:w-auto px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300">å…³é—­</button>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- DATA STORE ---
        const contentData = {
            efficiency: {
                title: "æ•ˆç‡æ‚–è®ºï¼šJevons Paradox",
                source: "Microsoft 2025 / Frontiers",
                html: `<div class="insight-box blue"><h4 class="text-blue-800 font-bold mb-1">æ ¸å¿ƒæ•°æ®</h4>Copilot å¹³å‡æ¯å‘¨èŠ‚çœ <strong>5-10 å°æ—¶</strong> è¡Œæ”¿æ—¶é—´ï¼ˆæ’è¯¾ã€åŸºç¡€è¯„åˆ†ï¼‰ã€‚</div><p class="prose-p">ç„¶è€Œï¼ŒUS Dept of Ed è­¦å‘Šï¼šå†å²è¡¨æ˜ï¼ŒæŠ€æœ¯æå‡æ•ˆç‡åï¼Œäººä»¬å¾€å¾€ä¼šå¢åŠ å·¥ä½œé‡è€Œéäº«å—é—²æš‡ã€‚å¦‚æœå­¦æ ¡ä»…ä»…åˆ©ç”¨ AI æ¥å¸ƒç½®æ›´å¤šä½œä¸šï¼Œå°†å¯¼è‡´å¸ˆç”Ÿæ›´åŠ ç–²æƒ«ã€‚</p><div class="insight-box purple"><h4 class="text-purple-800 font-bold mb-1">æ­£ç¡®è·¯å¾„</h4>å¿…é¡»åˆ¶å®šæ”¿ç­–ï¼Œå¼ºåˆ¶å°†èŠ‚çœçš„æ—¶é—´ç”¨äº <strong>High-touch (é«˜æ¥è§¦)</strong> çš„æƒ…æ„Ÿäº’åŠ¨ã€‚</div>`
            },
            role: {
                title: "æ•™å¸ˆæ–°è§’è‰²ï¼šOrchestrator",
                source: "US Dept of Ed",
                html: `<p class="prose-p">åœ¨ä¿¡æ¯ç¨€ç¼ºæ—¶ä»£ï¼Œæ•™å¸ˆæ˜¯â€œçŸ¥è¯†æºâ€ã€‚åœ¨ AI æ—¶ä»£ï¼ŒçŸ¥è¯†æ˜¯å»‰ä»·çš„ã€‚</p><h3 class="prose-h3">ä» Solo åˆ° æŒ‡æŒ¥å®¶</h3><p class="prose-p">æ•™å¸ˆä¸å†æ˜¯èˆå°ä¸Šçš„ç‹¬å”±è€… (Sage on the Stage)ï¼Œè€Œæ˜¯å­¦ä¹ ä½“éªŒçš„ç¼–æ’è€…ã€‚ä½ éœ€è¦å†³å®šä½•æ—¶è®© AI ç‹¬å¥ï¼ˆè‡ªé€‚åº”ç»ƒä¹ ï¼‰ï¼Œä½•æ—¶å…¨ç­åˆå¥ï¼ˆè®¨è®ºï¼‰ï¼Œä½•æ—¶ä»‹å…¥æŒ‡å¯¼ã€‚</p>`
            },
            divide: {
                title: "æ•°å­—é¸¿æ²Ÿ 3.0ï¼šèƒ½åŠ›é¸¿æ²Ÿ",
                source: "arXiv:2503.00079",
                html: `<p class="prose-p">é¸¿æ²Ÿçš„å½¢æ€æ­£åœ¨è¿›åŒ–ï¼š</p><ul><li><strong>1.0:</strong> æœ‰æ²¡æœ‰è®¾å¤‡ (Access)</li><li><strong>2.0:</strong> æœ‰æ²¡æœ‰ç½‘ç»œ (Connectivity)</li><li><strong>3.0:</strong> ä¼šä¸ä¼šæŒ‡æŒ¥ AI (Capability)</li></ul><div class="insight-box orange"><h4 class="text-orange-800 font-bold mb-1">é©¬å¤ªæ•ˆåº”é£é™©</h4>å¯Œè£•å®¶åº­çš„å­©å­ç”±ç§æ•™æŒ‡å¯¼å¦‚ä½• <strong>Command AI</strong>ï¼Œè´«å›°å®¶åº­çš„å­©å­åˆ™è¢« <strong>Managed by AI</strong>ï¼ˆè¢«ç®—æ³•åˆ·é¢˜ç³»ç»Ÿç®¡ç†ï¼‰ã€‚</div>`
            },
            sentiment: {
                title: "æ•°æ®è§£è¯»ï¼šå¸ˆç”Ÿé”™ä½",
                source: "ç»¼åˆè°ƒæŸ¥æ•°æ®",
                html: `<p class="prose-p"><strong>å­¦ç”Ÿè§†è§’ (åŠ¡å®)ï¼š</strong> å–œæ¬¢ AI çš„â€œæ— è¯„åˆ¤æ€§â€ã€‚å‘ AI é—®è ¢é—®é¢˜ä¸ä¼šæ„Ÿåˆ°ç¾è€»ã€‚</p><p class="prose-p"><strong>æ•™å¸ˆè§†è§’ (ç„¦è™‘)ï¼š</strong> æœ€æ‹…å¿ƒçš„ä¸æ˜¯å¤±ä¸šï¼Œè€Œæ˜¯â€œå¼‚åŒ–â€ã€‚å¦‚æœè¯„è¯­æ˜¯ AI å†™çš„ï¼Œå­¦ç”Ÿæ˜¯ AI æ•™çš„ï¼Œå¸ˆç”Ÿå…³ç³»è¿˜å­˜åœ¨å—ï¼Ÿ</p>`
            },
            shift_create: {
                title: "Bloom åˆ†ç±»æ³•å€’ç½®",
                source: "Frontiers Review",
                html: `<p class="prose-p">ä¼ ç»Ÿæ•™è‚²èŠ±è´¹ 80% æ—¶é—´åœ¨åº•å±‚ï¼ˆè®°å¿†ã€ç†è§£ï¼‰ã€‚AI æ—¶ä»£ï¼Œåº•å±‚èƒ½åŠ›å¯å¤–åŒ…ã€‚æ•™è‚²é‡å¿ƒå¿…é¡»è·ƒå‡è‡³é¡¶å±‚çš„ <strong>Create (åˆ›é€ )</strong> å’Œ <strong>Evaluate (è¯„ä»·)</strong>ã€‚</p>`
            },
            shift_assess: {
                title: "éšå½¢è¯„ä¼° (Stealth Assessment)",
                source: "US Dept of Ed",
                html: `<p class="prose-p">ç»ˆç»“æ€§è¯„ä»·ï¼ˆå¦‚æœŸæœ«è€ƒã€è®ºæ–‡ï¼‰å·²è¢«ç”Ÿæˆå¼ AI å‡»ç©¿ã€‚</p><div class="insight-box blue"><strong>æœªæ¥æ–¹æ¡ˆï¼š</strong> åˆ©ç”¨æ•°å­—åŒ–å­¦ä¹ è¿‡ç¨‹ä¸­çš„æ•°æ®æµã€‚å½“å­¦ç”Ÿåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œåå°ç®—æ³•å®æ—¶åˆ†æå…¶ç­–ç•¥å’Œè¯•é”™æ¨¡å¼ã€‚è¯„ä¼°ä¸å†æ˜¯â€œä¸­æ–­å­¦ä¹ æ¥è€ƒè¯•â€ï¼Œè€Œæ˜¯æ— æ„ŸçŸ¥çš„ã€‚</div>`
            },
            shift_resource: {
                title: "å­¦ä¹ èµ„æºï¼šåŠ¨æ€ç”Ÿæˆ",
                source: "Microsoft 2025",
                html: `<p class="prose-p">é™æ€æ•™ææ›´æ–°å¤ªæ…¢ã€‚AI å¯ä»¥å®ç°â€œæ–‡åŒ–å“åº”æ€§æ•™å­¦â€ã€‚ä¾‹å¦‚ï¼Œç»™å–œæ¬¢è¶³çƒçš„å­¦ç”Ÿç”Ÿæˆå…³äºâ€œå°„é—¨æŠ›ç‰©çº¿â€çš„ç‰©ç†é¢˜ï¼Œç»™å–œæ¬¢éŸ³ä¹çš„å­¦ç”Ÿç”Ÿæˆå…³äºâ€œå£°æ³¢â€çš„é¢˜ç›®ã€‚ä¸ªæ€§åŒ–èƒ½æ˜¾è‘—æå‡åŠ¨æœºã€‚</p>`
            },
            future_morning: {
                title: "2030: æ™¨é—´æ•°æ®ç®€æŠ¥",
                source: "Microsoft 2025 Vision",
                html: `<p class="prose-p">æ•™å¸ˆä¸å†éœ€è¦æ‰‹åŠ¨æ‰¹æ”¹ä½œä¸šã€‚æ—©ä¸Š 8 ç‚¹ï¼ŒAI åŠ©æ•™æ¨é€ç®€æŠ¥ï¼šâ€œæ˜¨æ™š 5 åå­¦ç”Ÿåœ¨äºŒæ¬¡å‡½æ•°å›¾åƒå˜æ¢ä¸­å—æŒ«ã€‚å»ºè®®ä»Šå¤©è¯¾å ‚å¯ç”¨â€˜åŠ¨æ€å‡ ä½•â€™æ¨¡ç»„è¿›è¡Œè¡¥æ•‘ã€‚â€</p>`
            },
            future_class: {
                title: "2030: é¡¹ç›®å¼åä½œ",
                source: "Microsoft 2025 Vision",
                html: `<p class="prose-p">å­¦ç”Ÿåœ¨æ··åˆç°å®ä¸­è®¾è®¡ç«æ˜ŸåŸºåœ°ã€‚AI åŠ©æ•™å®æ—¶ç›‘æ§å„å°ç»„çš„åä½œæ¨¡å¼ï¼Œè¯†åˆ«å‡ºå“ªä¸ªå­¦ç”Ÿåœ¨â€œæ­ä¾¿è½¦â€ï¼Œå“ªä¸ªå­¦ç”Ÿåœ¨ä¸»å¯¼ï¼Œå¹¶æç¤ºæ•™å¸ˆè¿›è¡Œå…¬å¹³æ€§å¹²é¢„ã€‚</p>`
            },
            future_evening: {
                title: "2030: åƒäººåƒé¢çš„ç»ƒä¹ ",
                source: "Microsoft 2025 Vision",
                html: `<p class="prose-p">æ²¡æœ‰ç»Ÿä¸€çš„ä½œä¸šå•ã€‚AI æ ¹æ®æ¯ä¸ªå­¦ç”Ÿå½“å¤©çš„è®¤çŸ¥è´Ÿè·æ•°æ®ï¼Œç”Ÿæˆäº† 30 ä»½å®Œå…¨ä¸åŒçš„æŒ‘æˆ˜ä»»åŠ¡ã€‚æœ‰çš„å­¦ç”Ÿéœ€è¦å·©å›ºåŸºç¡€ï¼Œæœ‰çš„å­¦ç”Ÿéœ€è¦æ‹“å±•æŒ‘æˆ˜ã€‚</p>`
            },
            curr_k5: {
                title: "K-5 æ ¸å¿ƒæ´»åŠ¨ï¼šTeachable Machine",
                source: "ACM K-12 Guidelines",
                html: `<p class="prose-p">ç›®æ ‡ï¼šç¥›é­…ã€‚è®©å­©å­æ˜ç™½æœºå™¨ä¸å…·å¤‡æ„è¯†ï¼Œåªæ˜¯åœ¨æ‰¾è§„å¾‹ã€‚</p><p class="prose-p">æ´»åŠ¨ï¼šåˆ©ç”¨ Google Teachable Machine è®­ç»ƒä¸€ä¸ªè¯†åˆ«â€œçŒ« vs ç‹—â€çš„æ¨¡å‹ã€‚æ•…æ„å–‚ç»™å®ƒé”™è¯¯çš„å›¾ç‰‡ï¼Œè®©å­©å­äº²çœ¼çœ‹åˆ°æœºå™¨æ˜¯å¦‚ä½•â€œå­¦åâ€çš„ã€‚</p>`
            },
            curr_68: {
                title: "6-8 æ ¸å¿ƒæ´»åŠ¨ï¼šåè§ä¾¦æ¢",
                source: "ACM K-12 Guidelines",
                html: `<p class="prose-p">ç›®æ ‡ï¼šç†è§£ç®—æ³•å¯¹ç¤¾ä¼šçš„å½±å“ã€‚</p><p class="prose-p">æ´»åŠ¨ï¼šæ¨¡æ‹Ÿä¸€ä¸ªè§†é¢‘æ¨èç®—æ³•ã€‚åˆ†æå®ƒå¦‚ä½•æ ¹æ®ç”¨æˆ·çš„ç‚¹å‡»å†å²å½¢æˆâ€œä¿¡æ¯èŒ§æˆ¿â€ï¼Œè®¨è®ºè¿™é€šè¿‡ä»€ä¹ˆæœºåˆ¶å½±å“äº†æˆ‘ä»¬å¯¹ä¸–ç•Œçš„çœ‹æ³•ã€‚</p>`
            },
            curr_912: {
                title: "9-12 æ ¸å¿ƒæ´»åŠ¨ï¼šRAG åº”ç”¨",
                source: "ACM K-12 Guidelines",
                html: `<p class="prose-p">ç›®æ ‡ï¼šç»¼åˆåº”ç”¨è§£å†³çœŸå®é—®é¢˜ã€‚</p><p class="prose-p">æ´»åŠ¨ï¼šæ„å»ºä¸€ä¸ªæ ¡å›­é—®ç­”æœºå™¨äººã€‚å­¦ç”Ÿéœ€è¦æ•´ç†æ ¡å›­è§„åˆ™æ–‡æ¡£ï¼ŒæŒ‚è½½çŸ¥è¯†åº“ (RAG)ï¼Œå¹¶ç¼–å†™æç¤ºè¯ï¼Œç¡®ä¿æœºå™¨äººå›ç­”å‡†ç¡®ä¸”æœ‰ç¤¼è²Œã€‚</p>`
            }
        };

        // --- GAME LOGIC ---
        const gameScenarios = [
            {
                id: 1,
                title: "çªå‘ï¼šæŒ«è´¥æ„Ÿ",
                desc: "å­¦ç”Ÿ Alex åœ¨è§£äºŒæ¬¡æ–¹ç¨‹æ—¶å¡ä½äº†ï¼Œè¡¨ç°å‡ºæ˜æ˜¾çš„æ„¤æ€’ï¼Œå‡†å¤‡æ”¾å¼ƒã€‚AI ç›‘æµ‹åˆ°é«˜å‹åŠ›å€¼ã€‚",
                options: [
                    { text: "è®© AI ç›´æ¥ç»™å‡ºæ­¥éª¤", outcome: "bad", feedback: "âŒ é”™å¤±è‰¯æœºã€‚è™½ç„¶æ¶ˆé™¤äº†æŒ«è´¥æ„Ÿï¼Œä½†å­¦ç”Ÿå¤±å»äº†å»ºç«‹ç¥ç»è¿æ¥çš„æœºä¼šï¼ˆæœ‰å®³ä¾èµ–ï¼‰ã€‚" },
                    { text: "äº²è‡ªé‡è®²ä¸€é", outcome: "neutral", feedback: "âš ï¸ æ•ˆç‡è¾ƒä½ã€‚è™½ç„¶æœ‰æ•ˆï¼Œä½†åœ¨å¤§ç­é¢ä¸‹ä¸å¯æŒç»­ã€‚" },
                    { text: "AI æç¤º + äººç±»é¼“åŠ±", outcome: "good", feedback: "âœ… å®Œç¾æŒ‡æŒ¥ã€‚AI æä¾›è®¤çŸ¥è„šæ‰‹æ¶ï¼Œä½ æä¾›æƒ…æ„Ÿæ”¯æŒã€‚è¿™æ˜¯æœ€ä½³çš„ Human-in-the-loop æ¨¡å¼ã€‚" }
                ]
            },
            {
                id: 2,
                title: "å«Œç–‘ï¼šå®Œç¾çš„è®ºæ–‡",
                desc: "ä¸€åå¹³æ—¶å†™ä½œä¸€èˆ¬çš„å­¦ç”Ÿæäº¤äº†ä¸€ç¯‡è¾è—»åä¸½çš„è®ºæ–‡ã€‚æ£€æµ‹å™¨æ˜¾ç¤º 80% AI æ¦‚ç‡ã€‚",
                options: [
                    { text: "åˆ¤é›¶åˆ†å¹¶æƒ©ç½š", outcome: "bad", feedback: "âŒ è¯¯åˆ¤é£é™©é«˜ã€‚æ£€æµ‹å™¨ä¸å¯é ï¼ˆFrontiers æŠ¥å‘Šï¼‰ã€‚ä¸”è¿™ç§åšæ³•ç ´åäº†ä¿¡ä»»ã€‚" },
                    { text: "æ— è§†ï¼Œç›´æ¥è¯„åˆ†", outcome: "neutral", feedback: "âš ï¸ æ”¾å¼ƒæ ‡å‡†ã€‚è¿™ä¼šä¼ è¾¾é”™è¯¯çš„ä¿¡å·ï¼Œå³â€œç»“æœâ€é‡äºâ€œè¿‡ç¨‹â€ã€‚" },
                    { text: "è¿›è¡Œå£å¤´ç­”è¾©", outcome: "good", feedback: "âœ… é€†å‘å›¾çµæµ‹è¯•ã€‚è®©å­¦ç”Ÿè§£é‡Šè®ºæ–‡ä¸­çš„è§‚ç‚¹ã€‚å¦‚æœä»–æ˜¯ä½œè€…ï¼ˆæˆ–ç†è§£äº† AI çš„ç”Ÿæˆï¼‰ï¼Œä»–èƒ½å›ç­”ä¸Šæ¥ã€‚" }
                ]
            },
            {
                id: 3,
                title: "éšç§ï¼šå®¶é•¿çš„æ‹…å¿§",
                desc: "å®¶é•¿æŠ•è¯‰å­¦æ ¡ä½¿ç”¨çš„ AI è¾…å¯¼è½¯ä»¶å¯èƒ½ä¼šæ³„éœ²å­©å­çš„å­¦ä¹ æ•°æ®ç»™å¤§å…¬å¸ã€‚",
                options: [
                    { text: "åœç”¨æ‰€æœ‰ AI è½¯ä»¶", outcome: "bad", feedback: "âŒ å› å™åºŸé£Ÿã€‚è¿™ä¼šè®©å­¦ç”Ÿåœ¨æœªæ¥çš„æ•°å­—é¸¿æ²Ÿä¸­å¤„äºåŠ£åŠ¿ã€‚" },
                    { text: "è§£é‡Šè¿™æ— æ³•é¿å…", outcome: "neutral", feedback: "âš ï¸ ä¸è´Ÿè´£ä»»ã€‚å¿½è§†äº† US Dept of Ed å…³äºæ•°æ®éšç§çš„è­¦å‘Šã€‚" },
                    { text: "å¯ç”¨å›´å¢™èŠ±å›­æ¨¡å¼", outcome: "good", feedback: "âœ… ä¸“ä¸šåº”å¯¹ã€‚ä½¿ç”¨ä¼ä¸šç‰ˆ/æœ¬åœ°åŒ–æ¨¡å‹ï¼Œç¡®ä¿æ•°æ®ä¸ç”¨äºè®­ç»ƒå…¬å…±å¤§æ¨¡å‹ã€‚" }
                ]
            }
        ];

        let currentGameIndex = 0;

        function renderGameScene() {
            const scene = gameScenarios[currentGameIndex];
            const container = document.getElementById('game-scene-area');
            const counter = document.getElementById('scene-counter');
            const progressBar = document.getElementById('game-progress');

            // Update Progress
            counter.innerText = `åœºæ™¯ ${currentGameIndex + 1}/${gameScenarios.length}`;
            progressBar.style.width = `${((currentGameIndex + 1) / gameScenarios.length) * 100}%`;

            // Render HTML
            let html = `
                <div class="mb-6 animate-slide-up">
                    <div class="inline-block bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded mb-2 font-bold">${scene.title}</div>
                    <p class="text-gray-800 font-medium text-lg mb-2">${scene.desc}</p>
                </div>
                <div class="space-y-3 animate-slide-up" style="animation-delay: 0.1s">
            `;

            scene.options.forEach((opt, idx) => {
                html += `
                    <div class="game-card border-2 border-gray-100 rounded-xl p-4 hover:bg-gray-50 flex items-center" onclick="handleGameChoice('${opt.outcome}', '${opt.feedback}')">
                        <div class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center font-bold mr-3 flex-shrink-0">${String.fromCharCode(65+idx)}</div>
                        <div class="text-sm font-medium text-gray-700">${opt.text}</div>
                    </div>
                `;
            });
            
            html += `</div>`;
            container.innerHTML = html;
        }

        function handleGameChoice(outcome, feedbackText) {
            const feedbackOverlay = document.getElementById('game-feedback');
            const icon = document.getElementById('feedback-icon');
            const title = document.getElementById('feedback-title');
            const text = document.getElementById('feedback-text');

            feedbackOverlay.classList.remove('hidden');
            feedbackOverlay.classList.add('flex'); // Enable flex layout

            if(outcome === 'good') {
                icon.innerHTML = '<i class="fas fa-check-circle text-green-500"></i>';
                title.innerText = "æ˜æ™ºçš„å†³ç­–";
                title.className = "font-bold text-xl mb-2 text-green-800";
            } else if (outcome === 'neutral') {
                icon.innerHTML = '<i class="fas fa-exclamation-circle text-orange-500"></i>';
                title.innerText = "æœ‰å¾…å•†æ¦·";
                title.className = "font-bold text-xl mb-2 text-orange-800";
            } else {
                icon.innerHTML = '<i class="fas fa-times-circle text-red-500"></i>';
                title.innerText = "æ½œåœ¨é£é™©";
                title.className = "font-bold text-xl mb-2 text-red-800";
            }
            text.innerText = feedbackText;
        }

        function nextScene() {
            document.getElementById('game-feedback').classList.add('hidden');
            document.getElementById('game-feedback').classList.remove('flex');
            
            if (currentGameIndex < gameScenarios.length - 1) {
                currentGameIndex++;
                renderGameScene();
            } else {
                document.getElementById('game-over').classList.remove('hidden');
                document.getElementById('game-over').classList.add('flex');
            }
        }

        function restartGame() {
            currentGameIndex = 0;
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('game-over').classList.remove('flex');
            renderGameScene();
        }

        // --- SIMULATION LOGIC ---
        function updateSim(val) {
            const v = parseInt(val);
            const effBox = document.getElementById('box-eff');
            const cogBox = document.getElementById('box-cog');
            
            const efficiency = Math.min(100, Math.floor(v * 0.9 + 10));
            let cognitive;
            if (v <= 45) cognitive = Math.floor(40 + (v * 1.2)); 
            else cognitive = Math.floor(94 - ((v - 45) * 1.5)); 
            if (cognitive < 10) cognitive = 10;

            document.getElementById('score-eff').innerText = efficiency;
            document.getElementById('score-cog').innerText = cognitive;

            effBox.className = `p-4 rounded-lg border transition-all duration-300 ${efficiency > 80 ? 'bg-green-50 border-green-300 text-green-700' : 'bg-gray-50 border-gray-200'}`;
            cogBox.className = `p-4 rounded-lg border transition-all duration-300 ${cognitive > 80 ? 'bg-indigo-50 border-indigo-300 text-indigo-700' : (cognitive < 40 ? 'bg-red-50 border-red-300 text-red-700' : 'bg-gray-50 border-gray-200')}`;

            const feedback = document.getElementById('sim-feedback');
            if (v < 20) feedback.innerHTML = "<strong>ä½æ•ˆåŒºï¼š</strong> çº¯äººå·¥ã€‚æ€ç»´æ·±åº¦è¶³å¤Ÿï¼Œä½†å®¹æ˜“äº§ç”ŸæŒ«è´¥æ„Ÿï¼Œæ— æ³•å¤„ç†å¤æ‚é—®é¢˜ã€‚";
            else if (v >= 20 && v <= 60) feedback.innerHTML = "<strong>ğŸŒŸ ç”œèœœç‚¹ (Sweet Spot)ï¼š</strong> ç¬¦åˆâ€œå¿…è¦å›°éš¾â€ç†è®ºã€‚AI æ‰¿æ‹…ä½é˜¶è´Ÿè·ï¼Œä¿ç•™é«˜é˜¶æ€è€ƒã€‚";
            else feedback.innerHTML = "<strong>âš ï¸ è®¤çŸ¥èç¼©åŒºï¼š</strong> AI å®Œæˆäº†æ€è€ƒã€‚æ•ˆç‡æé«˜ï¼Œä½†å­¦ç”Ÿå¤§è„‘æœªå—é”»ç‚¼ã€‚";
        }

        // --- APP SHELL LOGIC ---
        function switchTab(id) {
            ['overview', 'game', 'shifts', 'future', 'literacy', 'labs'].forEach(t => {
                document.getElementById('view-' + t).classList.add('hidden');
                document.getElementById('tab-' + t).classList.remove('active');
            });
            document.getElementById('view-' + id).classList.remove('hidden');
            document.getElementById('tab-' + id).classList.add('active');
            
            if(id === 'overview' || id === 'literacy') {
                window.dispatchEvent(new Event('resize'));
            }
            // Game Init Trigger
            if(id === 'game') {
                renderGameScene();
            }
        }

        // --- MODAL LOGIC (FIXED) ---
        function openModal(key) {
            const data = contentData[key];
            if(!data) {
                console.warn("Missing data for key:", key);
                return;
            }
            
            const overlay = document.getElementById('modal-overlay');
            const container = document.getElementById('modal-container');
            
            document.getElementById('modal-title').innerText = data.title;
            document.getElementById('modal-source').innerText = "æ¥æº: " + data.source;
            document.getElementById('modal-body').innerHTML = data.html;

            // Show
            overlay.classList.remove('hidden');
            container.classList.remove('hidden');
            
            // Trigger animation
            setTimeout(() => {
                overlay.classList.remove('opacity-0');
                container.classList.add('open');
            }, 10);
            
            document.body.style.overflow = 'hidden'; // Prevent background scroll
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            const container = document.getElementById('modal-container');
            
            overlay.classList.add('opacity-0');
            container.classList.remove('open');
            
            setTimeout(() => {
                overlay.classList.add('hidden');
                container.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        // --- CHARTS ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('app-loader');
            
            // Sentiment
            new Chart(document.getElementById('chartSentiment'), {
                type: 'bar',
                data: {
                    labels: ['çœæ—¶', 'ä¸ªæ€§åŒ–', 'å‚ä¸åº¦', 'ä½œå¼Šç„¦è™‘', 'å…¬å¹³ç„¦è™‘'],
                    datasets: [{ data: [85, 78, 65, -60, -45], backgroundColor: c => c.raw > 0 ? '#38b2ac' : '#f56565', borderRadius: 4 }]
                },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false } } }
            });

            // Literacy
            new Chart(document.getElementById('chartLiteracy'), {
                type: 'radar',
                data: {
                    labels: ['æŠ€æœ¯', 'åº”ç”¨', 'æ‰¹åˆ¤', 'ä¼¦ç†', 'åˆ›é€ '],
                    datasets: [{ label: 'æƒé‡', data: [20, 30, 25, 20, 15], backgroundColor: 'rgba(56, 178, 172, 0.2)', borderColor: '#38b2ac' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { r: { ticks: { display: false } } } }
            });

            // Sim
            updateSim(50);

            // Hide Loader
            setTimeout(() => {
                loader.style.opacity = '0';
                loader.style.visibility = 'hidden';
            }, 800);
        });
    </script>
</body>
</html>
